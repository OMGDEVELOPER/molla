{{ "featured-products.css" | asset_url | stylesheet_tag }}

<section class="featured-products section-width container">
  <h1 class="__heading">FEATURED PRODUCTS</h1>
  <div class="__row">
    {% for product_handle in section.settings.product_lists %}
      {% assign product_obj = all_products[product_handle] %}
      {% if product_obj %}
        <div class="item">
          <a href="{{ product_obj.url }}">
            <img src="{{ product_obj.featured_image | image_url: width: 400 }}" alt="{{ product_obj.title }}" />
            <h2>{{ product_obj.title }}</h2>
            <div class="_description">
              {{ product_obj.description | strip_html | truncate: 200 }}
            </div>
            <p class="_price">{{ product_obj.price | money }}</p>
          </a>

          <div class="_status">
            {% if product_obj.available %}
              <span class="_stock in-stock"></span>
              <span class="_status_text">In Stock</span>
            {% else %}
              <span class="_stock out-of-stock"></span>
              <span class="_status_text">Sold Out</span>
            {% endif %}
          </div>

          {% if product_obj.available %}
            <form method="post" action="/cart/add">
              {% if product_obj.variants.size > 1 %}
                <select name="id" class="form-select mb-2">
                  {% for variant in product_obj.variants %}
                    <option value="{{ variant.id }}" {% unless variant.available %}disabled{% endunless %}>
                      {{ variant.title }}{% unless variant.available %} - Sold Out{% endunless %}
                    </option>
                  {% endfor %}
                </select>
              {% else %}
                <input type="hidden" name="id" value="{{ product_obj.variants.first.id }}">
              {% endif %}
              <button type="submit" class="btn btn-primary mt-2">Add to Cart</button>
            </form>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "product_list",
      "id": "product_lists",
      "label": "Product Lists"
    }
  ],
  "presets": [
    {
      "name": "Featured Products"
    }
  ]
}
{% endschema %}
