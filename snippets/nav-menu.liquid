{% style %}
  .nav-menu {
    background: #050505;
  }
  .nav-menu ul {
    padding: 0px;
    margin: 0px;
    display: flex;
    gap: 25px;
    justify-content: center;
    align-items: center;
  }
  .nav-menu ul li:hover a {
    color: #127fb5;
  }
  .nav-menu ul li {
    list-style: none;
    position: relative;
  }
  .nav-menu ul li a {
    color: #fafafa;
    font-family: Karla;
    font-size: clamp(12px, 5vw, 16px);
    font-style: normal;
    font-weight: 500;
    line-height: 24px; /* 150% */
    text-transform: uppercase;
  }
  .nav-menu ul li.has-sub {
  }
  .nav-menu ul li.has-sub {
    display: flex;
    gap: 8px;
  }
  .nav-menu ul li.has-sub::after {
    transition: transform 0.3s ease;
  }
  .nav-menu ul li.has-sub.active::after {
    transform: rotate(180deg);
  }
  .nav-menu ul li.has-sub::after {
    content: '';
    width: 25px;
    height: 22px;
    display: block;
    background-image: url(https://cdn.shopify.com/s/files/1/0859/1186/3592/files/keyboard_arrow_down.svg?v=1752584493);
  }
{% endstyle %}
<div class="header-bottom d-lg-block nav-menu">
  <div class="container">
    <div class="main-header header-menu horizon-menu">
      <nav class="main-navigation">
        <ul class="menu-items-main">
          <li><a href="#">Home</a></li>
          <li><a href="#">About Us</a></li>
          <li class="has-sub" child-menu-id="submenu-3"><a href="#">Our Products</a></li>
          <li><a href="#">Inspiration</a></li>
          <li><a href="#">Blog</a></li>
          <li><a href="#">FAQâ€™s</a></li>
          <li><a href="#">Contact Us</a></li>
        </ul>
      </nav>
    </div>
  </div>
</div>
{% javascript %}
  function LoadMenuJs() {
    let menuItems = document.querySelectorAll('.header-group .menu-items-main li');

    menuItems.forEach((item) => {
      if (item.classList.contains('has-sub') && !item.hasAttribute('data-bound')) {
        let menuClass = item.getAttribute('child-menu-id');
        let mainHeader = item.closest('.header-group');
        let submenuElement = mainHeader?.querySelector('.' + menuClass);

        if (menuClass && submenuElement) {
          item.addEventListener('click', function () {
            console.log('clicked');
            submenuElement.classList.toggle('active');
            item.classList.toggle('active');
          });

          item.setAttribute('data-bound', 'true'); // mark as bound
        }
      }
    });
  }
  let stickyAdded = false;
  let ActiveClass = false;
  let ElementClonedDetected = false
  function LoadStickyMenuJs() {
     if (document.querySelectorAll('.cloned .header-group .menu-items-main li')) {
       ElementClonedDetected = true;
      let menuItems = document.querySelectorAll('.cloned .header-group .menu-items-main li');
       menuItems.forEach((item) => {
          if (item.classList.contains('has-sub')) {
            let menuClass = item.getAttribute('child-menu-id');
            let mainHeader = document.querySelector('.cloned .header-group');
            let submenuElement = mainHeader?.querySelector('.' + menuClass);
            item.addEventListener('click', function () {
              console.log('clicked cloned')
              if(submenuElement.classList.contains('.active')){
                submenuElement.classList.remove('active');
                item.classList.remove('active');
              }else{
                submenuElement.classList.add('active');
                item.classList.add('active');
              }
            });
         }
       })
     }
  }

  // Initial normal header setup
  LoadMenuJs();

  // Sticky check using interval until bound
  const stickyInterval = setInterval(() => {
    console.log(ElementClonedDetected)
      LoadStickyMenuJs();
  }, 900);
{% endjavascript %}
